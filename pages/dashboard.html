<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - MAINTAIN HEALTH</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .welcome-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .menu-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s;
            text-align: center;
        }
        
        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        
        .menu-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .back-button {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .back-button:hover {
            background: #d32f2f;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="welcome-header">
            <h1>Selamat Datang di MAINTAIN HEALTH</h1>
            <p>Kelola kesehatan Anda dengan mudah</p>
        </div>
        
        <!-- Menu Cards -->
        <div class="menu-grid" id="main-menu">
            <div class="menu-card" onclick="showSection('data-diri')">
                <div class="menu-icon">üìã</div>
                <h3>Data Diri</h3>
                <p>Lengkapi informasi pribadi Anda</p>
            </div>
            
            <div class="menu-card" onclick="showSection('monitoring')">
                <div class="menu-icon">üìä</div>
                <h3>Monitoring</h3>
                <p>Pantau kondisi kesehatan harian</p>
            </div>
            
            <div class="menu-card" onclick="showSection('keluhan')">
                <div class="menu-icon">üíä</div>
                <h3>Keluhan</h3>
                <p>Catat keluhan kesehatan Anda</p>
            </div>
            
            <div class="menu-card" onclick="showSection('pengingat')">
                <div class="menu-icon">‚è∞</div>
                <h3>Pengingat Obat</h3>
                <p>Atur jadwal minum obat</p>
            </div>
            
            <div class="menu-card" onclick="showSection('riwayat')">
                <div class="menu-icon">üìö</div>
                <h3>Riwayat</h3>
                <p>Lihat riwayat kesehatan</p>
            </div>
            
            <div class="menu-card" onclick="window.location.href='healthmind.html'">
                <div class="menu-icon">ü§ñ</div>
                <h3>HealthMind Assistant</h3>
                <p>Konsultasi dengan AI</p>
            </div>
            
            <div class="menu-card" onclick="window.location.href='account.html'">
                <div class="menu-icon">üë§</div>
                <h3>Akun Saya</h3>
                <p>Kelola profil dan pengaturan</p>
            </div>
        </div>
        
        <!-- Content Sections -->
        <div id="data-diri-section" class="content-section hidden">
            <button class="back-button" onclick="showMainMenu()">Kembali</button>
            <h2>Data Diri</h2>
            <form onsubmit="event.preventDefault(); saveDataDiri()">
                <div class="form-group">
                    <label>Nama Lengkap:</label>
                    <input type="text" id="nama-lengkap" class="input-field" required>
                </div>
                
                <div class="form-group">
                    <label>Tanggal Lahir:</label>
                    <input type="date" id="tanggal-lahir" class="input-field" required>
                </div>
                
                <div class="form-group">
                    <label>Jenis Kelamin:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="radio" name="jenis-kelamin" value="Laki-laki"> Laki-laki
                        </label>
                        <label class="checkbox-item">
                            <input type="radio" name="jenis-kelamin" value="Perempuan"> Perempuan
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Alergi:</label>
                    <input type="text" id="alergi" class="input-field" placeholder="Contoh: Debu, Makanan laut">
                </div>
                
                <div class="form-group">
                    <label>Golongan Darah:</label>
                    <select id="golongan-darah" class="input-field">
                        <option value="">Pilih Golongan Darah</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="AB">AB</option>
                        <option value="O">O</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Riwayat Penyakit Dahulu (RPD):</label>
                    <textarea id="rpd" class="input-field" rows="3"></textarea>
                </div>
                
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
        
        <div id="monitoring-section" class="content-section hidden">
            <button class="back-button" onclick="showMainMenu()">Kembali</button>
            <h2>Monitoring Kesehatan</h2>
            <form onsubmit="event.preventDefault(); saveMonitoring()">
                <div class="form-group">
                    <label>Suhu Tubuh (¬∞C):</label>
                    <input type="number" id="suhu" step="0.1" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Berat Badan (kg):</label>
                    <input type="number" id="berat" step="0.1" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Tinggi Badan (cm):</label>
                    <input type="number" id="tinggi" step="0.1" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Saturasi Oksigen (%):</label>
                    <input type="number" id="saturasi" min="0" max="100" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Tensi Darah:</label>
                    <input type="text" id="tensi" placeholder="Contoh: 120/80" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Golongan Darah:</label>
                    <select id="monitoring-golongan-darah" class="input-field">
                        <option value="">Pilih Golongan Darah</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="AB">AB</option>
                        <option value="O">O</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
        
        <div id="keluhan-section" class="content-section hidden">
            <button class="back-button" onclick="showMainMenu()">Kembali</button>
            <h2>Keluhan Kesehatan</h2>
            <form onsubmit="event.preventDefault(); saveKeluhan()">
                <div class="form-group">
                    <label>Keluhan yang dirasakan:</label>
                    <textarea id="keluhan" class="input-field" rows="2" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Mulai kapan terasa:</label>
                    <input type="date" id="mulai-kapan" class="input-field" required>
                </div>
                
                <div class="form-group">
                    <label>Frekuensi:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="radio" name="frekuensi" value="terus-menerus"> Terus menerus
                        </label>
                        <label class="checkbox-item">
                            <input type="radio" name="frekuensi" value="kadang-kadang"> Kadang-kadang
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Tingkatan nyeri (1-10):</label>
                    <input type="number" id="tingkat-nyeri" min="1" max="10" class="input-field">
                </div>
                
                <div class="form-group">
                    <label>Lokasi nyeri:</label>
                    <input type="text" id="lokasi-nyeri" class="input-field" placeholder="Contoh: Kepala, Perut">
                </div>
                
                <div class="form-group">
                    <label>Gejala tambahan:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="demam"> Demam</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="mual"> Mual/Muntah</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="pusing"> Pusing</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="batuk"> Batuk/Pilek</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="sesak"> Sesak nafas</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="cemas"> Cemas</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="nafsu-makan"> Tidak nafsu makan</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="ruam"> Ruam</label>
                        <label class="checkbox-item"><input type="checkbox" name="gejala" value="gatal"> Gatal</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Pernah mengalami sebelumnya:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="radio" name="pernah-sebelumnya" value="iya"> Iya</label>
                        <label class="checkbox-item"><input type="radio" name="pernah-sebelumnya" value="tidak"> Tidak</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Sedang konsumsi obat?</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="radio" name="konsumsi-obat" value="iya" onclick="toggleObatField(true)"> Iya</label>
                        <label class="checkbox-item"><input type="radio" name="konsumsi-obat" value="tidak" onclick="toggleObatField(false)"> Tidak</label>
                    </div>
                </div>
                
                <div id="obat-field" class="form-group hidden">
                    <label>Nama Obat:</label>
                    <input type="text" id="nama-obat" class="input-field">
                </div>
                
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
        
        <div id="pengingat-section" class="content-section hidden">
            <button class="back-button" onclick="showMainMenu()">Kembali</button>
            <h2>Pengingat Obat</h2>
            <form onsubmit="event.preventDefault(); savePengingatObat()">
                <div class="form-group">
                    <label>Jumlah obat:</label>
                    <input type="number" id="jumlah-obat" min="1" class="input-field" required>
                </div>
                
                <div class="form-group">
                    <label>Dosis obat:</label>
                    <input type="text" id="dosis" class="input-field" placeholder="Contoh: 500mg" required>
                </div>
                
                <div class="form-group">
                    <label>Bentuk obat:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="radio" name="bentuk-obat" value="tablet"> Tablet</label>
                        <label class="checkbox-item"><input type="radio" name="bentuk-obat" value="kapsul"> Kapsul</label>
                        <label class="checkbox-item"><input type="radio" name="bentuk-obat" value="sirup"> Sirup</label>
                        <label class="checkbox-item"><input type="radio" name="bentuk-obat" value="tetes"> Tetes</label>
                        <label class="checkbox-item"><input type="radio" name="bentuk-obat" value="puyer"> Puyer</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Frekuensi:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="radio" name="frekuensi-obat" value="1x1"> 1x1</label>
                        <label class="checkbox-item"><input type="radio" name="frekuensi-obat" value="2x1"> 2x1</label>
                        <label class="checkbox-item"><input type="radio" name="frekuensi-obat" value="3x1"> 3x1</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Aturan minum:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="radio" name="aturan-minum" value="sebelum-makan"> Sebelum makan</label>
                        <label class="checkbox-item"><input type="radio" name="aturan-minum" value="sesudah-makan"> Sesudah makan</label>
                        <label class="checkbox-item"><input type="radio" name="aturan-minum" value="bila-perlu"> Bila perlu</label>
                    </div>
                </div>
                
                <button type="submit" class="btn-primary">Simpan & Ingatkan Saya</button>
            </form>
        </div>
        
        <div id="riwayat-section" class="content-section hidden">
            <button class="back-button" onclick="showMainMenu()">Kembali</button>
            <h2>Riwayat Kesehatan</h2>
            
            <div class="riwayat-container" id="riwayat-container">
                <!-- Riwayat akan diisi oleh JavaScript -->
            </div>
            
            <button class="btn-primary" onclick="generatePDF()">Simpan ke PDF</button>
        </div>
    </div>
    
    <script src="../js/script.js"></script>
    <script>
        function showMainMenu() {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById('main-menu').classList.remove('hidden');
        }
        
        function showSection(section) {
            document.getElementById('main-menu').classList.add('hidden');
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.getElementById(section + '-section').classList.remove('hidden');
            
            if (section === 'riwayat') {
                loadRiwayat();
            }
        }
        
        function toggleObatField(show) {
            const field = document.getElementById('obat-field');
            if (show) {
                field.classList.remove('hidden');
            } else {
                field.classList.add('hidden');
            }
        }
        
        function loadRiwayat() {
            const userData = JSON.parse(localStorage.getItem('userData')) || {};
            const container = document.getElementById('riwayat-container');
            
            let html = '<div class="riwayat-card">';
            
            // Hitung usia
            if (userData.profile && userData.profile.tanggalLahir) {
                const age = calculateAge(userData.profile.tanggalLahir);
                html += `<p><strong>Usia:</strong> ${age} tahun</p>`;
            }
            
            // Hitung BMI
            if (userData.monitoring && userData.monitoring.berat && userData.monitoring.tinggi) {
                const bmi = calculateBMI(userData.monitoring.berat, userData.monitoring.tinggi);
                html += `<p><strong>IMT:</strong> ${bmi}</p>`;
            }
            
            // Tampilkan data diri
            if (userData.profile) {
                html += '<h3>Data Diri</h3>';
                html += `<p>Nama: ${userData.profile.namaLengkap || '-'}</p>`;
                html += `<p>Golongan Darah: ${userData.profile.golonganDarah || '-'}</p>`;
                html += `<p>Alergi: ${userData.profile.alergi || '-'}</p>`;
            }
            
            // Tampilkan monitoring terakhir
            if (userData.monitoring) {
                html += '<h3>Monitoring Terakhir</h3>';
                html += `<p>Suhu: ${userData.monitoring.suhu || '-'} ¬∞C</p>`;
                html += `<p>Berat: ${userData.monitoring.berat || '-'} kg</p>`;
                html += `<p>Tensi: ${userData.monitoring.tensi || '-'}</p>`;
            }
            
            // Tampilkan keluhan terakhir
            if (userData.keluhan) {
                html += '<h3>Keluhan Terakhir</h3>';
                html += `<p>Keluhan: ${userData.keluhan.keluhan || '-'}</p>`;
                html += `<p>Mulai: ${userData.keluhan.mulaiKapan || '-'}</p>`;
            }
            
            html += '</div>';
            container.innerHTML = html;
        }
    </script>
</body>
</html>