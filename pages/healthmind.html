<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HealthMind - Maintain Health</title>

<style>
body{
font-family: system-ui;
margin:0;
background:#f5f5f5;
}

header{
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
padding:20px;
text-align:center;
}

.container{
max-width:800px;
margin:auto;
padding:20px;
}

.card{
background:white;
padding:20px;
border-radius:20px;
margin-bottom:20px;
}

.chat{
height:400px;
overflow-y:auto;
border:1px solid #ddd;
border-radius:15px;
padding:10px;
background:#fafafa;
}

.message{
margin:10px 0;
display:flex;
}

.user{
justify-content:flex-end;
}

.bubble{
padding:10px 15px;
border-radius:15px;
max-width:70%;
}

.user .bubble{
background:#667eea;
color:white;
}

.ai .bubble{
background:#eee;
}

.input-area{
display:flex;
gap:10px;
margin-top:10px;
}

input{
flex:1;
padding:10px;
border-radius:10px;
border:1px solid #ccc;
}

button{
padding:10px 15px;
border:none;
border-radius:10px;
background:#667eea;
color:white;
cursor:pointer;
}

.media{
display:flex;
gap:10px;
margin-top:10px;
}

.history p{
border-bottom:1px solid #eee;
padding:5px;
cursor:pointer;
}
</style>
</head>

<body>

<header>
<h1>HealthMind Assistant</h1>
<p>Asisten kesehatan pintar</p>
</header>

<div class="container">

<div class="card">
<div id="chat" class="chat"></div>

<div class="input-area">
<input id="input" placeholder="Tanyakan sesuatu...">
<button onclick="send()">Kirim</button>
</div>

<div class="media">
<button onclick="openCamera()">ðŸ“· Kamera</button>
<button onclick="openGallery()">ðŸ–¼ Galeri</button>
<button onclick="startMic()">ðŸŽ¤ Mic</button>
</div>
</div>

<div class="card">
<h3>Riwayat Pencarian</h3>
<div id="history" class="history"></div>
</div>

</div>

<script>

function send(){
let input=document.getElementById("input");
let text=input.value.trim();
if(!text) return;

addMessage(text,"user");
saveHistory(text);

input.value="";

setTimeout(()=>{
addMessage(getAI(text),"ai");
},700);
}

function addMessage(text,type){
let chat=document.getElementById("chat");

let div=document.createElement("div");
div.className="message "+type;

div.innerHTML=`<div class="bubble">${text}</div>`;
chat.appendChild(div);

chat.scrollTop=chat.scrollHeight;
}

function getAI(text){
text=text.toLowerCase();

if(text.includes("imt"))
return "IMT adalah Indeks Massa Tubuh untuk mengetahui berat badan ideal.";

if(text.includes("demam"))
return "Cara menurunkan demam: istirahat, minum air putih, dan kompres hangat.";

if(text.includes("batuk"))
return "Jika batuk: minum air hangat, istirahat, dan hindari udara dingin.";

return "Terima kasih atas pertanyaannya. Silakan konsultasi dokter jika perlu.";
}

////////////////////////////////////
KAMERA
////////////////////////////////////
async function openCamera(){
try{
const stream=await navigator.mediaDevices.getUserMedia({video:true});
addMessage("ðŸ“· Kamera berhasil dibuka","ai");

setTimeout(()=>{
stream.getTracks().forEach(track=>track.stop());
addMessage("Foto berhasil diambil","ai");
},3000);

}catch{
addMessage("Kamera tidak diizinkan browser","ai");
}
}

////////////////////////////////////
GALERI
////////////////////////////////////
function openGallery(){
let input=document.createElement("input");
input.type="file";
input.accept="image/*";

input.onchange=e=>{
let file=e.target.files[0];
if(file){
addMessage("ðŸ–¼ Gambar dipilih: "+file.name,"user");
}
};

input.click();
}

////////////////////////////////////
MIC
////////////////////////////////////
let recorder;
let chunks=[];

async function startMic(){
try{
const stream=await navigator.mediaDevices.getUserMedia({audio:true});
recorder=new MediaRecorder(stream);

recorder.ondataavailable=e=>{
chunks.push(e.data);
};

recorder.onstop=()=>{
addMessage("ðŸŽ¤ Rekaman suara berhasil","user");
};

recorder.start();
addMessage("ðŸŽ¤ Rekaman dimulai...","ai");

setTimeout(()=>{
recorder.stop();
},3000);

}catch{
addMessage("Mic tidak diizinkan browser","ai");
}
}

////////////////////////////////////
HISTORY
////////////////////////////////////
function saveHistory(text){
let data=JSON.parse(localStorage.getItem("history")||"[]");
data.unshift(text);
localStorage.setItem("history",JSON.stringify(data));
showHistory();
}

function showHistory(){
let data=JSON.parse(localStorage.getItem("history")||"[]");
let box=document.getElementById("history");

box.innerHTML="";

data.slice(0,10).forEach(item=>{
let p=document.createElement("p");
p.textContent="ðŸ”Ž "+item;
p.onclick=()=>{
document.getElementById("input").value=item;
};
box.appendChild(p);
});
}

showHistory();

</script>

</body>
</html>