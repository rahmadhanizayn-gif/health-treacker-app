<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HealthMind - MAINTAIN HEALTH</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #f5f5f5;
            min-height: 100vh;
        }

        /* HEADER */
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .dashboard-header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .dashboard-header p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .back-button {
            position: absolute;
            top: 24px;
            left: 24px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
        }

        /* CONTENT */
        .content {
            padding: 16px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* CARD */
        .card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 12px;
        }

        .card-header h2 {
            color: #333;
            font-size: 1.5rem;
        }

        .card-header span {
            font-size: 2rem;
        }

        /* CHAT AREA */
        .chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: #f9f9f9;
            border-radius: 16px;
            margin-bottom: 16px;
            border: 2px solid #f0f0f0;
        }

        .message {
            display: flex;
            margin-bottom: 16px;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.ai {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 20px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px 20px 4px 20px;
        }

        .ai .message-content {
            background: #f0f0f0;
            color: #333;
            border-radius: 20px 20px 20px 4px;
        }

        .message-time {
            font-size: 0.7rem;
            color: #999;
            margin-top: 4px;
            text-align: right;
        }

        /* INPUT AREA */
        .input-area {
            background: white;
            border-radius: 30px;
            padding: 8px;
            display: flex;
            gap: 8px;
            border: 2px solid #e0e0e0;
        }

        .input-area input {
            flex: 1;
            padding: 16px;
            border: none;
            font-size: 1rem;
            background: transparent;
        }

        .input-area input:focus {
            outline: none;
        }

        .input-area button {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .input-area button:hover {
            transform: scale(1.1);
        }

        /* MEDIA BUTTONS */
        .media-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 16px;
        }

        .media-btn {
            padding: 12px 24px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            background: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .media-btn:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        /* SUGGESTIONS */
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 16px;
        }

        .suggestion-chip {
            padding: 8px 16px;
            background: #f0f0f0;
            border-radius: 30px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .suggestion-chip:hover {
            background: #e0e0e0;
        }

        /* NOTIFICATION */
        .custom-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10000;
            animation: slideIn 0.3s;
            max-width: 350px;
        }

        .notification-success {
            border-left: 4px solid #48bb78;
        }

        .notification-error {
            border-left: 4px solid #f56565;
        }

        .notification-info {
            border-left: 4px solid #4299e1;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <button class="back-button" onclick="goBack()">‚Üê</button>
        <h1>HEALTHMIND</h1>
        <p>Asisten Kesehatan Pintar</p>
    </div>

    <div class="content">
        <div class="card">
            <div class="card-header">
                <span>ü§ñ</span>
                <h2>AI Health Assistant</h2>
            </div>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        <div class="message-content">
                            Halo! Saya HealthMind Assistant. Ada yang bisa saya bantu tentang kesehatan Anda?
                            <div class="message-time">Sekarang</div>
                        </div>
                    </div>
                </div>

                <div class="input-area">
                    <input type="text" id="messageInput" placeholder="Tanyakan sesuatu..." onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()">üì§</button>
                </div>

                <div class="suggestions">
                    <span class="suggestion-chip" onclick="useSuggestion('Apa itu IMT?')">Apa itu IMT?</span>
                    <span class="suggestion-chip" onclick="useSuggestion('Cara menurunkan demam')">Cara menurunkan demam</span>
                    <span class="suggestion-chip" onclick="useSuggestion('Makanan untuk diabetes')">Makanan untuk diabetes</span>
                    <span class="suggestion-chip" onclick="useSuggestion('Gejala COVID-19')">Gejala COVID-19</span>
                </div>

                <div class="media-buttons">
                    <button class="media-btn" onclick="openCamera()">
                        <span>üì∑</span> Kamera
                    </button>
                    <button class="media-btn" onclick="openGallery()">
                        <span>üñºÔ∏è</span> Galeri
                    </button>
                    <button class="media-btn" onclick="startVoice()">
                        <span>üé§</span> Mic
                    </button>
                </div>
            </div>
        </div>

        <!-- RIWAYAT PENCARIAN -->
        <div class="card">
            <div class="card-header">
                <span>üìú</span>
                <h2>Riwayat Pencarian</h2>
            </div>
            <div id="searchHistory">
                <!-- Akan diisi JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // ========== NOTIFICATION ==========
        function showNotification(message, type = 'success') {
            const notif = document.createElement('div');
            notif.className = `custom-notification notification-${type}`;
            notif.innerHTML = `
                <span class="notification-icon">${getIcon(type)}</span>
                <span class="notification-message">${message}</span>
                <span class="notification-close" onclick="this.parentElement.remove()">‚úï</span>
            `;
            document.body.appendChild(notif);
            
            setTimeout(() => notif.remove(), 3000);
        }

        function getIcon(type) {
            switch(type) {
                case 'success': return '‚úÖ';
                case 'error': return '‚ùå';
                case 'info': return '‚ÑπÔ∏è';
                default: return '‚úÖ';
            }
        }

        // ========== NAVIGATION ==========
        function goBack() {
            window.location.href = 'dashboard.html';
        }

        // ========== CHAT ==========
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) {
                showNotification('Masukkan pesan terlebih dahulu', 'error');
                return;
            }
            
            // Tampilkan pesan user
            addMessage(message, 'user');
            
            // Simpan ke riwayat
            saveSearchHistory(message);
            
            // Kosongkan input
            input.value = '';
            
            // Simulasi AI merespon
            setTimeout(() => {
                const response = getAIResponse(message);
                addMessage(response, 'ai');
            }, 1000);
        }

        function addMessage(text, sender) {
            const messagesDiv = document.getElementById('chatMessages');
            const time = new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-content">
                    ${text}
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function getAIResponse(message) {
            const responses = {
                'apa itu imt': 'IMT (Indeks Massa Tubuh) adalah ukuran yang digunakan untuk menilai status gizi seseorang berdasarkan berat badan dan tinggi badan. Rumusnya: berat badan (kg) / (tinggi badan (m) x tinggi badan (m)).',
                'cara menurunkan demam': 'Untuk menurunkan demam: 1) Komres air hangat, 2) Minum air putih yang banyak, 3) Istirahat cukup, 4) Konsumsi obat penurun panas jika perlu, 5) Konsultasi ke dokter jika demam tinggi.',
                'makanan untuk diabetes': 'Makanan yang baik untuk diabetes: 1) Sayuran hijau, 2) Ikan, 3) Kacang-kacangan, 4) Buah dengan indeks glikemik rendah, 5) Hindari makanan manis dan tinggi karbohidrat.',
                'gejala covid-19': 'Gejala umum COVID-19: 1) Demam, 2) Batuk kering, 3) Kelelahan, 4) Kehilangan indra perasa/penciuman, 5) Sesak nafas. Segera periksakan ke dokter jika mengalami gejala.',
            };
            
            // Cari response yang cocok
            const lowerMessage = message.toLowerCase();
            for (let key in responses) {
                if (lowerMessage.includes(key)) {
                    return responses[key];
                }
            }
            
            // Response default
            const defaultResponses = [
                'Terima kasih atas pertanyaannya. Saya sarankan untuk berkonsultasi dengan dokter untuk informasi lebih lanjut.',
                'Berdasarkan informasi yang Anda berikan, sebaiknya istirahat yang cukup dan minum air putih.',
                'Saya mencatat pertanyaan Anda. Untuk kasus seperti ini, pemeriksaan langsung ke dokter lebih disarankan.',
                'Maaf, saya belum memiliki informasi spesifik tentang itu. Silakan konsultasi dengan tenaga kesehatan.',
                'Jangan lupa untuk selalu menjaga pola hidup sehat dan olahraga teratur!'
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        function useSuggestion(text) {
            document.getElementById('messageInput').value = text;
            sendMessage();
        }

        // ========== SEARCH HISTORY ==========
        function saveSearchHistory(query) {
            let history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            history.unshift({
                query: query,
                time: new Date().toISOString()
            });
            
            // Batasi 10 riwayat terakhir
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            localStorage.setItem('searchHistory', JSON.stringify(history));
            displaySearchHistory();
        }

        function displaySearchHistory() {
            const historyDiv = document.getElementById('searchHistory');
            const history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            
            if (history.length === 0) {
                historyDiv.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">Belum ada riwayat pencarian</p>';
                return;
            }
            
            let html = '';
            history.forEach(item => {
                const date = new Date(item.time).toLocaleDateString('id-ID');
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #f0f0f0; cursor: pointer;" onclick="useSuggestion('${item.query}')">
                        <span>üîç ${item.query}</span>
                        <span style="color: #999; font-size: 0.8rem;">${date}</span>
                    </div>
                `;
            });
            
            historyDiv.innerHTML = html;
        }

        // ========== MEDIA FUNCTIONS ==========
        function openCamera() {
            showNotification('üì∑ Membuka kamera...', 'info');
            
            // Simulasi kamera
            setTimeout(() => {
                addMessage('üì∑ [Foto dari kamera]', 'user');
                setTimeout(() => {
                    addMessage('Saya melihat gambar tersebut. Apakah ini resep dokter?', 'ai');
                }, 1000);
            }, 2000);
        }

        function openGallery() {
            showNotification('üñºÔ∏è Membuka galeri...', 'info');
            
            // Simulasi galeri
            setTimeout(() => {
                addMessage('üñºÔ∏è [Foto dari galeri]', 'user');
                setTimeout(() => {
                    addMessage('Terima kasih sudah mengirimkan gambar. Ada yang bisa saya bantu?', 'ai');
                }, 1000);
            }, 2000);
        }

        function startVoice() {
            showNotification('üé§ Mendengarkan...', 'info');
            
            // Simulasi voice input
            setTimeout(() => {
                const dummyVoiceMessages = [
                    'Saya merasa pusing',
                    'Cara mengatasi demam',
                    'Makanan sehat untuk diet'
                ];
                const message = dummyVoiceMessages[Math.floor(Math.random() * dummyVoiceMessages.length)];
                addMessage(`üé§ ${message}`, 'user');
                
                setTimeout(() => {
                    const response = getAIResponse(message);
                    addMessage(response, 'ai');
                }, 1000);
            }, 3000);
        }

        // ========== INIT ==========
        document.addEventListener('DOMContentLoaded', function() {
            displaySearchHistory();
        });
    </script>
</body>
</html>